### 脉冲发生器功能块(LGF_Impulse)算法流程描述

#### 1. 功能概述
该功能块用于生成指定频率的脉冲信号，每个脉冲持续一个控制周期。主要特性包括：
- 根据输入的频率参数生成周期性脉冲
- 提供倒计时输出显示下一次脉冲的时间
- 支持频率参数动态调整

#### 2. 核心算法流程

**初始化阶段**：
- 定义常量：零值(0.0)、零时间(T#0ms)、千(1000.0)、千秒(t#1000s)
- 初始化内部状态变量：前次频率值、脉冲周期时间

**主处理逻辑**：
1. **输入有效性检查**：
   - 如果输入频率≤0，立即禁用功能块
   - 设置脉冲输出为FALSE
   - 设置倒计时输出为0

2. **频率参数处理**：
   - 当检测到频率参数变化时：
     a. 计算新的脉冲周期：周期 = 1000秒 / (频率×1000)
     b. 存储当前频率值用于下次比较

3. **脉冲生成机制**：
   - 使用自重启定时器(TOF)实现周期性脉冲
   - 脉冲输出 = 定时器非Q输出(产生一个周期的高电平)
   - 定时器参数：
     * 触发条件：定时器非Q输出(自重启)
     * 预设时间：计算得到的脉冲周期

4. **倒计时计算**：
   - 倒计时 = 脉冲周期 - 定时器已运行时间

5. **输出更新**：
   - 将临时脉冲值赋给输出
   - 将临时倒计时值赋给输出
   - 强制ENO为TRUE(不使用ENO机制)

#### 3. 关键设计要点
- 采用自重启定时器实现周期性，确保脉冲宽度严格为一个控制周期
- 频率变化时自动重新计算周期，保证输出频率准确性
- 倒计时输出提供系统可观测性
- 对无效输入(频率≤0)有明确处理逻辑

#### 4. 性能考虑
- 仅在频率变化时重新计算周期，减少不必要的计算
- 使用临时变量减少直接输出访问
- 定时器采用最优化的TOF类型实现脉冲生成

这个算法设计确保了脉冲生成的精确性和实时性，同时提供了良好的参数可调性和系统可观测性。