这是一个过程控制任务，涉及手动模式和自动模式两种主要状态，以及各自的状态转换逻辑。

算法流程分析：

1. 状态划分：
   - 手动模式（button1=0）
   - 自动模式（button1=1）

2. 手动模式逻辑：
   - 当button2和button3都为0时：
     * 所有指示灯关闭
   - 当button2=1且button3=0时：
     * 绿灯常亮
     * 红灯以0.5Hz频率闪烁（使用两个交替的1秒定时器实现）
   - 当button2=0且button3=1时：
     * 红灯常亮
     * 黄灯以1Hz频率闪烁
   - 当button2和button3都为1时：
     * 黄灯常亮
     * 绿灯以1Hz频率闪烁

3. 自动模式逻辑（循环序列）：
   - 状态0（初始状态）：
     * 绿灯亮1秒
     * 定时器触发后转入状态1
   - 状态1：
     * 红灯亮1秒
     * 定时器触发后转入状态2
   - 状态2：
     * 黄灯亮1秒
     * 定时器触发后返回状态0

4. 定时器管理：
   - 手动模式使用两个定时器交替工作实现0.5Hz闪烁
   - 自动模式使用单个定时器控制每个状态的持续时间

5. 状态转换：
   - 手动/自动模式切换由button1状态决定
   - 自动模式内部状态转换由定时器触发
   - 模式切换时需重置所有定时器和状态变量

6. 输出控制：
   - 每个状态下明确控制三个指示灯的输出状态
   - 自动模式使用状态变量(CycleStep)跟踪当前步骤

该算法通过状态变量和定时器实现了两种模式下的灯光控制逻辑，符合需求描述的所有功能要求。