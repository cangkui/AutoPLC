这是一个过程控制任务，涉及多个状态转换的自动化灌装线控制。根据需求分析和代码实现，以下是算法流程描述：

1. 状态定义：
   - 等待瓶子状态（STATE_WAITING_FOR_BOTTLE）：初始状态，所有设备关闭
   - 清洗状态（STATE_CLEANING）：启动清洗泵
   - 灌装状态（STATE_FILLING）：启动灌装阀门
   - 封盖状态（STATE_CAPPING）：启动封盖机
   - 包装状态（STATE_PACKING）：启动包装机
   - 完成状态（STATE_COMPLETED）：点亮完成指示灯

2. 状态转移逻辑：
   a) 从等待瓶子状态：
      - 当bottleSensor检测到瓶子时，转移到清洗状态

   b) 在清洗状态：
      - 保持清洗泵运行
      - 当操作员按下cleaningConfirmButton时，转移到灌装状态

   c) 在灌装状态：
      - 保持灌装阀门开启
      - 当操作员按下fillingConfirmButton时，转移到封盖状态

   d) 在封盖状态：
      - 保持封盖机运行
      - 当操作员按下cappingConfirmButton时，转移到包装状态

   e) 在包装状态：
      - 保持包装机运行
      - 当操作员按下packingConfirmButton时，转移到完成状态

   f) 在完成状态：
      - 点亮完成指示灯
      - 当操作员按下finishedButton确认取走瓶子后，返回等待瓶子状态

3. 输出控制：
   - 每个状态只激活对应的设备输出
   - 状态切换时自动关闭前一个状态的设备
   - 完成指示灯只在完成状态点亮

4. 循环机制：
   - 使用状态机循环结构确保连续处理
   - 每次循环处理一个状态转移
   - 无状态转移时保持当前状态和设备输出

这个流程实现了完整的瓶子处理周期，从检测到瓶子开始，经过清洗、灌装、封盖、包装各工序，最终完成包装并由操作员确认后复位，准备下一个处理周期。每个工序都由操作员确认信号触发状态转移，确保工序间的正确顺序和人工确认环节。