

以下是锯齿波信号发生器的算法流程描述：

1. 错误处理阶段（优先级最高）
   - 调用QRY_CINT获取中断OB的时间参数
   - 当返回状态码非0时：
     → 标记错误状态（16#8601）
     → 输出值清零
     → 立即退出执行
   - 当检测到OB不可用时：
     → 标记OB不可用错误（16#8600）
     → 输出值清零
     → 立即退出执行

2. 复位控制阶段
   - 当reset信号有效时：
     → 重置内部计数器为0
     → 临时输出值清零

3. 正常运算阶段
   - 时间累积计算：
     ① 将OB调用间隔时间转换为秒级单位
     ② 累加形成时间计数器
     ③ 应用模运算限制在周期范围内（自动循环）
   - 相位计算：
     ① 将用户相位偏移量转换为时间单位
     ② 与累积时间进行相位合成
     ③ 再次应用模运算确保相位在周期内
   - 波形生成：
     ① 计算线性上升斜率：2*幅值/周期
     ② 通过相位时间计算当前瞬时值
     ③ 应用幅值偏移（-幅值 实现锯齿波特征）

4. 结果输出阶段
   - 叠加用户设置的偏移量
   - 设置正常完成状态码（16#0000）
   - 清除错误标志

注：计数器设计特点 - 使用秒级时间累积替代直接时间戳，避免数值溢出问题。相位合成采用两次模运算确保时间基准同步。波形斜率系数固定为2，通过数学变换直接生成标准锯齿波形。