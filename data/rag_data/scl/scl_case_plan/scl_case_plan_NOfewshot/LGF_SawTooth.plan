

以下是锯齿波信号发生器的算法流程思维链总结：

1. **初始化阶段**
   - 首次运行或复位时：
   a. 缓存所有输入参数到静态变量（startValue/timeRange/incrementRange/numberSteps/endlessSteps）
   b. 重置当前值为起始值，步数计数器归零
   c. 设置定时器启动标志位

2. **步进控制逻辑**
   - 当定时器完成且未复位时：
   a. 当前值 += 增量值
   b. 步数计数器 +1
   c. 处理步数限制：
      - 有限模式：当步数超过设定值时，重置当前值和步数计数器
      - 无限模式：强制步数计数器归零（但保持当前值持续增长）
   d. 复位定时器启动标志

3. **定时器管理**
   - 每次循环强制启动定时器（TON_TIME）
   - 使用timeRange作为定时器预设值
   - 通过定时器完成标志触发步进计算

4. **输出处理**
   - 始终输出当前计算值
   - 复位信号强制时：
   a. 立即重置当前值为最新startValue
   b. 保持参数更新能力（复位期间仍接受输入参数修改）

5. **状态保持机制**
   - 静态变量存储运行状态（当前值/步数/定时状态）
   - 参数变更在下次复位/初始化时生效
   - 通过firstRun标志保证初始化只执行一次

关键特征说明：
- 定时器采用"触发-完成"循环机制，每个步进周期严格对应timeRange时长
- 无限模式下实际步数会超过numberSteps定义值（该参数仅在有限模式生效）
- 复位操作立即生效且优先于其他逻辑
- 所有参数修改需配合复位操作才能生效