{"variables": [], "instructions": [], "planning": "- 概述\n  这段代码定义了一个名为 `BLIND_NIGHT` 的功能块，用于控制百叶窗在白天和夜间的行为。功能块根据输入的时间、日出日落时间以及偏移量，判断当前是白天还是夜间，并根据不同的条件控制百叶窗的位置和角度。\n\n- 变量定义\n  代码中定义了以下几类变量：\n  - 输入变量：包括百叶窗的上升（UP）和下降（DN）信号、输入状态（S_IN）、输入位置（PI）、输入角度（AI）、夜间使能（E_NIGHT）、白天使能（E_DAY）、当前时间（DTIN）、日出时间（SUNRISE）、日落时间（SUNSET）、日出偏移量（SUNRISE_OFFSET）、日落偏移量（SUNSET_OFFSET）、夜间位置（NIGHT_POSITION）和夜间角度（NIGHT_ANGLE）。\n  - 输出变量：包括百叶窗的上升输出（QU）、下降输出（QD）、状态（STATUS）、输出位置（PO）和输出角度（AO）。\n  - 内部变量：包括当前是否为夜间（night）、上次进入夜间的日期（last_night）和上次进入白天的日期（last_day）。\n\n- 主逻辑部分\n  -- REGION 夜间判断逻辑\n    此区域根据当前时间、日出日落时间以及偏移量，判断当前是否为夜间，并更新相关状态。\n    - 如果当前时间大于日落时间加上日落偏移量，并且上次进入夜间的日期小于当前日期，同时夜间使能（E_NIGHT）为真，则将 `night` 设置为 `TRUE`，并更新 `last_night` 为当前日期。\n    - 如果当前时间大于日出时间加上日出偏移量，并且上次进入白天的日期小于当前日期，同时白天使能（E_DAY）为真，并且上次进入夜间的日期小于当前日期，则将 `night` 设置为 `FALSE`，并更新 `last_day` 为当前日期。\n    - 如果 `UP` 和 `DN` 同时为 `FALSE`，并且 `night` 为 `TRUE`，则将 `night` 设置为 `FALSE`。\n\n  -- REGION 百叶窗控制逻辑\n    此区域根据是否为夜间以及输入信号，控制百叶窗的位置、角度和状态。\n    - 如果 `UP` 和 `DN` 同时为 `TRUE`，并且 `night` 为 `TRUE`，则将状态（STATUS）设置为 141，输出位置（PO）设置为夜间位置（NIGHT_POSITION），输出角度（AO）设置为夜间角度（NIGHT_ANGLE）。\n    - 否则，将上升输出（QU）设置为 `UP`，下降输出（QD）设置为 `DN`，输出位置（PO）设置为输入位置（PI），输出角度（AO）设置为输入角度（AI），状态（STATUS）设置为输入状态（S_IN）。", "name": "BLIND_NIGHT"}