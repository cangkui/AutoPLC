{"variables": [], "instructions": [], "planning": "- 概述\n  这段代码是一个用于控制锅炉系统的功能块，名为“LEGIONELLA”。它通过监测锅炉温度和回水温度，结合时间控制逻辑，确保系统在特定条件下运行，以防止军团菌的滋生。功能块支持手动和自动模式，并输出控制信号以操作加热器、泵和多个阀门。\n\n- 变量定义\n  代码中定义了以下几类变量：\n  - 输入变量：手动模式、锅炉温度、回水温度、日期时间、复位信号、启动时间、星期几、设定温度、温度偏移、温度滞后、最大加热时间、最大回水时间、多个时间参数（tp_0到tp_7）。\n  - 输出变量：加热器、泵、多个阀门（valve0到valve7）、运行状态、状态字节。\n  - 内部变量：定时器X1、序列控制器x2、滞后控制器x3、初始化标志init。\n\n- 主逻辑部分\n  -- REGION 初始化\n    在功能块的第一次运行时，初始化内部变量和控制器参数。具体操作包括：\n    - 设置定时器X1的星期几和启动时间。\n    - 配置滞后控制器x3的低和高阈值。\n    - 配置序列控制器x2的等待时间和延迟时间。\n    - 启动序列控制器x2。\n    这些初始化操作确保功能块在启动时具有正确的配置。\n\n  -- REGION 定时器逻辑\n    定时器X1根据输入的日期时间（DT_in）和配置的启动时间（T_start）来判断是否到达启动时间。如果到达启动时间，定时器X1的输出（X1.Q）为真。\n\n  -- REGION 控制逻辑\n    如果定时器X1的输出为真，或者手动模式被激活，或者序列控制器x2正在运行，则执行以下逻辑：\n    - 滞后控制器x3根据锅炉温度（temp_boiler）判断是否需要加热。\n    - 序列控制器x2的输入信号根据滞后控制器x3的输出和回水温度（temp_return）进行配置。\n    - 序列控制器x2的复位信号（rst）用于复位控制器。\n    - 序列控制器x2的启动信号（start）由定时器X1的输出或手动模式触发。\n    - 输出信号包括加热器（Heat）、泵（pump）、多个阀门（valve0到valve7）、运行状态（run）和状态字节（status）。\n    如果上述条件不满足，则停止序列控制器x2，并更新状态字节。\n\n  -- REGION 输出逻辑\n    根据控制逻辑的结果，功能块输出以下信号：\n    - 加热器（Heat）：当滞后控制器x3的输出为假且序列控制器x2正在运行时，加热器被激活。\n    - 泵（pump）：由序列控制器x2的输出（qx）控制。\n    - 多个阀门（valve0到valve7）：由序列控制器x2的相应输出（Q0到Q7）控制。\n    - 运行状态（run）：由序列控制器x2的运行状态（run）决定。\n    - 状态字节（status）：由序列控制器x2的状态字节（status）决定。\n\n- 总结\n  功能块“LEGIONELLA”通过定时器、滞后控制器和序列控制器的组合，实现了对锅炉系统的自动化控制。它能够根据锅炉温度、回水时间和配置的时间参数，自动或手动控制加热器、泵和多个阀门，以确保系统在特定条件下运行，防止军团菌的滋生。", "name": "LEGIONELLA"}