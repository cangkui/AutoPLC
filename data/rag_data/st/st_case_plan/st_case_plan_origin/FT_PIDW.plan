{"variables": [], "instructions": [], "planning": "- 概述\n  这个功能块名为 `FT_PIDW`，实现了一个比例-积分-微分（PID）控制器，带有输出限制功能。它通过输入信号 `IN`、比例增益 `KP`、积分时间 `TN`、微分时间 `TV` 以及上下限 `LIM_L` 和 `LIM_H` 来计算输出 `Y`，并检查输出是否超出限制范围。\n\n- 变量定义\n  代码中定义了以下几类变量：\n  - 输入变量：`IN`（输入信号）、`KP`（比例增益）、`TN`（积分时间）、`TV`（微分时间）、`LIM_L`（下限）、`LIM_H`（上限）、`RST`（复位信号）。\n  - 输出变量：`Y`（输出信号）、`LIM`（输出是否超出限制范围的标志）。\n  - 内部变量：`integ`（积分器实例）、`diff`（微分器实例）、`YI`（积分部分的输出）。\n\n- 主逻辑部分\n  -- REGION 积分部分\n    首先检查积分时间 `TN` 是否为 0 或复位信号 `RST` 是否为真。如果是，则禁用积分器并将积分输出 `YI` 重置为 0。否则，启用积分器，输入信号为 `IN`，增益为 `1.0 / TN`，并将积分结果存储在 `YI` 中。积分器的使能信号为 `NOT LIM`，表示如果输出超出限制范围，则停止积分。\n\n  -- REGION 比例部分\n    计算比例部分的输出，公式为 `Y := KP * (IN + YI)`，即比例增益乘以输入信号与积分输出的和。\n\n  -- REGION 微分部分\n    启用微分器，输入信号为 `IN`，增益为 `TV`。微分器的输出将用于后续计算。\n\n  -- REGION 输出限制检查\n    检查当前输出 `Y` 是否在限制范围内（即是否大于 `LIM_L` 且小于 `LIM_H`）。如果在范围内，则设置 `LIM` 为 `FALSE`，否则设置为 `TRUE`。\n\n  -- REGION 最终输出计算\n    将比例输出与微分输出相加，并使用 `LIMIT` 函数将其限制在 `LIM_L` 和 `LIM_H` 之间。最终结果存储在 `Y` 中。\n\n- 总结\n  该功能块实现了一个带有积分、微分和输出限制功能的 PID 控制器。它通过积分器和微分器分别计算积分和微分部分，结合比例部分得到最终输出，并确保输出在指定的范围内。如果输出超出范围，则会停止积分并设置限制标志。", "name": "FT_PIDW"}