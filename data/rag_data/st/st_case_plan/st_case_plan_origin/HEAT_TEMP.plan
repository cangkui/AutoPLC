{"variables": [], "instructions": [], "planning": "- 概述\n该功能块 `HEAT_TEMP` 用于根据外部温度、内部温度、偏移量等参数计算加热温度 (`TY`) 并决定是否启用加热 (`HEAT`)。功能块通过一系列计算和条件判断，确保加热温度在合理范围内，并根据需求温度 (`T_REQ`) 进行调整。\n\n- 变量定义\n代码中定义了以下几类变量：\n  - **输入变量**：包括外部温度 (`T_EXT`)、内部温度 (`T_INT`)、偏移量 (`OFFSET`)、需求温度 (`T_REQ`)、最大加热温度 (`TY_MAX`)、最小加热温度 (`TY_MIN`)、配置加热温度 (`TY_CONFIG`)、配置内部温度 (`T_INT_CONFIG`)、配置外部温度 (`T_EXT_CONFIG`)、温差 (`T_DIFF`)、系数 `C` 和系数 `H`。\n  - **输出变量**：包括计算后的加热温度 (`TY`) 和加热状态 (`HEAT`)。\n  - **内部变量**：包括中间计算值 `tr` 和 `tx`。\n\n- 主逻辑部分\n-- REGION 计算中间值\n   - 首先计算 `tr`，公式为：`tr := T_INT + OFFSET`，表示内部温度加上偏移量。\n   - 然后计算 `tx`，公式为：`tx := (tr - T_EXT) / (T_INT_CONFIG - T_EXT_CONFIG)`，表示调整后的温度差与配置温度差的比值。\n\n-- REGION 计算加热温度 (`TY`)\n   - 如果外部温度加上系数 `H` 大于 `tr`，则直接将 `TY` 设置为 `0.0`，表示不需要加热。\n   - 否则，通过以下公式计算 `TY`：\n     ```\n     TY := LIMIT(TY_MIN, tr + T_DIFF * 0.5 * tx + (TY_CONFIG - T_DIFF * 0.5 - tr) * EXPT(tx, 1.0 / C), TY_MAX)\n     ```\n     其中，`LIMIT` 函数确保 `TY` 在 `TY_MIN` 和 `TY_MAX` 之间，`EXPT` 函数用于计算 `tx` 的 `1.0 / C` 次方。\n   - 最后，将 `TY` 与需求温度 `T_REQ` 比较，取较大值，确保加热温度满足需求。\n\n-- REGION 确定加热状态 (`HEAT`)\n   - 如果 `TY` 大于 `0.0`，则设置 `HEAT` 为 `TRUE`，表示需要加热；否则设置为 `FALSE`。\n\n- 总结\n该功能块通过一系列计算和条件判断，动态调整加热温度，并决定是否启用加热。其核心逻辑包括：\n  - 根据内部温度、外部温度和偏移量计算中间值 `tr` 和 `tx`。\n  - 使用公式计算加热温度，并通过 `LIMIT` 函数确保其在合理范围内。\n  - 根据需求温度 `T_REQ` 进一步调整加热温度。\n  - 根据最终加热温度决定是否启用加热。", "name": "HEAT_TEMP"}