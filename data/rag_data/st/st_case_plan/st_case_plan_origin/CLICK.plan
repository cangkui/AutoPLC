{"variables": [], "instructions": [], "planning": "- 概述\n该功能块名为`CLICK`，用于检测输入信号的点击次数（单次、双击、三击），并根据时间间隔进行判断。它使用了一个状态机来跟踪点击次数，并通过输出信号和状态字节来指示检测到的点击类型。\n\n- 变量定义\n代码中定义了以下几类变量：\n - 输入变量：`in`（输入信号）、`T_debounce`（去抖动时间）、`T_short`（短点击时间）、`T_pause`（点击间隔时间）、`T_reconfig`（重新配置时间）。\n - 输出变量：`Q`（输入信号去抖后的状态）、`single`（单次点击标志）、`double`（双击标志）、`triple`（三击标志）、`status`（状态字节）。\n - 内部变量：`s_in`（去抖动功能块实例）、`tx`（当前时间）、`state`（点击次数状态）、`last`（上一次状态变化的时间）。\n\n- 主逻辑部分\n-- REGION 输入信号去抖动\n   使用`SW_RECONFIG`功能块对输入信号`in`进行去抖动处理，去抖动时间由`T_debounce`和`T_reconfig`参数决定。去抖动后的信号存储在`s_in.Q`中。\n-- REGION 获取当前时间\n   通过`OSCAT_BASIC.T_PLC_MS()`函数获取当前时间，并将其转换为`TIME`类型，存储在`tx`中。\n-- REGION 状态变化检测\n   如果去抖动后的信号`s_in.Q`与当前输出`Q`不同（即信号状态发生变化），则更新`last`为当前时间`tx`。如果信号从低变高（即检测到点击），则增加`state`的值（用于记录点击次数）。\n-- REGION 更新输出信号\n   将去抖动后的信号`s_in.Q`赋值给输出`Q`。\n-- REGION 点击次数判断\n   如果`state > 0`（即检测到至少一次点击），则根据以下条件判断点击类型：\n   - 如果信号为高且当前时间与`last`的时间差大于`T_short`，或者信号为低且时间差大于`T_pause`，则根据`state`的值确定点击类型：\n     - `state = 1`：单次点击，设置`single`为`TRUE`，`status`为`111`。\n     - `state = 2`：双击，设置`double`为`TRUE`，`status`为`112`。\n     - `state = 3`：三击，设置`triple`为`TRUE`，`status`为`113`。\n   然后将`state`重置为`0`，表示完成当前点击检测。\n   如果`Q`为低电平且`state = 0`（即没有检测到点击），则重置所有点击标志（`single`、`double`、`triple`为`FALSE`），并将`status`设置为`110`，表示空闲状态。同时更新`last`为当前时间`tx`，并将`state`重置为`0`。", "name": "CLICK"}