{"variables": [], "instructions": [], "planning": "- 概述\n这个功能块名为 `BLIND_SHADE_S`，用于控制窗帘或百叶窗的开关动作。它根据输入信号（如手动控制、太阳位置、时间等）来决定窗帘的开关状态，并输出相应的控制信号和状态信息。\n\n- 变量定义\n代码中定义了以下几类变量：\n - 输入变量：包括窗帘的上升（UP）、下降（DN）信号，输入状态（S_IN）、位置输入（PI），使能信号（ENABLE），太阳信号（SUN），水平角度范围（HORZ1, HORZ2），垂直角度（VERT），警报信号（ALERT），日出偏移时间（sunrise_offset），日落预设时间（sunset_preset），窗帘延迟时间（shade_delay），窗帘位置（shade_pos）。\n - 输入输出变量：日历信息（CX），用于获取当前时间和太阳位置。\n - 输出变量：包括上升输出（QU）、下降输出（QD），状态输出（STATUS），位置输出（PO）。\n - 内部变量：太阳延迟定时器（sun_delay），用于延迟太阳信号的响应。\n\n- 主逻辑部分\n-- REGION 太阳延迟定时器\n   首先，使用 `sun_delay` 定时器对太阳信号进行延迟处理。定时器的输入为 `sun` 信号，延迟时间为 `shade_delay`。定时器的输出 `sun_delay.Q` 表示太阳信号是否已经延迟完成。\n\n-- REGION 警报处理\n   如果 `ALERT` 信号为真，则强制窗帘上升（`QU := TRUE`），停止下降（`QD := FALSE`），并将状态设置为 152。\n\n-- REGION 太阳位置和时间条件\n   如果满足以下条件：\n   - `UP` 和 `DN` 信号同时为真，\n   - `ENABLE` 信号为真，\n   - 太阳延迟定时器已完成（`sun_delay.Q` 为真），\n   - 太阳的水平位置在 `HORZ1` 和 `HORZ2` 之间，\n   - 太阳的垂直位置小于 `VERT`，\n   - 当前时间在日出偏移时间之后且在日落预设时间之前，\n   则根据 `UP` 和 `DN` 信号控制窗帘的上升和下降（`QU := UP; QD := DN`），并将状态设置为 151。同时，位置输出 `PO` 为 `PI` 和 `shade_pos` 的最小值。\n\n-- REGION 默认处理\n   如果上述条件均不满足，则直接根据 `UP` 和 `DN` 信号控制窗帘的上升和下降（`QU := UP; QD := DN`），位置输出 `PO` 为 `PI`，状态输出 `STATUS` 为输入状态 `S_IN`。\n\n- 总结\n这个功能块通过结合手动控制信号、太阳位置信息和时间条件，智能地控制窗帘的开关动作。它使用定时器来延迟太阳信号的响应，并根据不同的条件输出相应的控制信号和状态信息。", "name": "BLIND_SHADE_S"}