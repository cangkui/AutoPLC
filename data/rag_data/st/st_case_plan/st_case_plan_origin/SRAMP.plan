{"variables": [], "instructions": [], "planning": "- 概述\n  该功能块 `SRAMP` 实现了一个斜坡函数生成器，用于生成平滑的斜坡输出。它根据输入信号 `X`、上升和下降加速度 `A_UP` 和 `A_DN`、最大上升和下降速度 `VU_MAX` 和 `VD_MAX`，以及上下限 `LIMIT_HIGH` 和 `LIMIT_LOW`，计算输出 `Y` 和速度 `V`。功能块还支持复位功能，可以在复位时将输出和速度重置为初始值。\n\n- 变量定义\n  代码中定义了以下几类变量：\n  - 输入变量：`X`（目标值）、`A_UP`（上升加速度）、`A_DN`（下降加速度）、`VU_MAX`（最大上升速度）、`VD_MAX`（最大下降速度）、`LIMIT_HIGH`（上限值）、`LIMIT_LOW`（下限值）、`RST`（复位信号）。\n  - 输出变量：`Y`（当前输出值）、`V`（当前速度）。\n  - 内部变量：`cycle_time`（周期时间）、`init`（初始化标志）。\n\n- 主逻辑部分\n  -- REGION 初始化\n     首先，调用 `cycle_time` 函数获取当前周期时间。然后，对输入参数进行处理：\n     - `A_UP` 和 `VU_MAX` 被限制为非负值。\n     - `A_DN` 和 `VD_MAX` 被限制为非正值。\n     如果复位信号 `RST` 为真，或者功能块尚未初始化，则将输出 `Y` 和速度 `V` 重置为 0，并设置初始化标志 `init` 为真。\n\n  -- REGION 目标值与当前值相等\n     如果目标值 `X` 等于当前输出值 `Y`，则将速度 `V` 设置为 0，表示无需进一步调整。\n\n  -- REGION 目标值大于当前值\n     如果目标值 `X` 大于当前输出值 `Y`，则计算新的速度 `V`：\n     - 首先，根据上升加速度 `A_UP` 和周期时间 `cycle_time` 更新速度 `V`，并确保其不超过最大上升速度 `VU_MAX`。\n     - 然后，根据当前输出值 `Y` 和目标值 `X` 的差值，以及下降加速度 `A_DN`，计算速度 `V` 的调整值，确保其不超过计算值。\n     - 最后，根据速度 `V` 和周期时间 `cycle_time` 更新输出值 `Y`，并确保其不超过上限值 `LIMIT_HIGH`。\n\n  -- REGION 目标值小于当前值\n     如果目标值 `X` 小于当前输出值 `Y`，则计算新的速度 `V`：\n     - 首先，根据下降加速度 `A_DN` 和周期时间 `cycle_time` 更新速度 `V`，并确保其不低于最大下降速度 `VD_MAX`。\n     - 然后，根据当前输出值 `Y` 和目标值 `X` 的差值，以及上升加速度 `A_UP`，计算速度 `V` 的调整值，确保其不低于计算值。\n     - 最后，根据速度 `V` 和周期时间 `cycle_time` 更新输出值 `Y`，并确保其不低于下限值 `LIMIT_LOW`。\n\n- 输出结果\n  最终，功能块输出当前值 `Y` 和速度 `V`，确保输出值在指定的上下限范围内，并且速度符合加速度和最大速度的限制。", "name": "SRAMP"}