{"variables": [], "instructions": [], "planning": "- 概述\n该功能块名为 `PARSET`，用于根据输入信号的变化，逐步调整输出值 `P1` 到 `P4`，使其从当前值平滑过渡到目标值。过渡时间由输入 `TC` 控制，且过渡过程可以通过输入信号 `A0` 和 `A1` 触发。\n\n- 变量定义\n代码中定义了以下几类变量：\n - 输入变量：`A0` 和 `A1` 是布尔信号，用于触发过渡过程；`X01` 到 `X34` 是实数值，表示目标值；`TC` 是时间值，用于控制过渡时间。\n - 输出变量：`P1` 到 `P4` 是实数值，表示当前输出值。\n - 内部变量：`X` 是一个二维数组，用于存储目标值；`S1` 到 `S4` 是实数值，表示过渡的斜率；`tx` 和 `last` 是 DWORD 类型，用于记录时间戳；`start` 是布尔信号，表示过渡是否正在进行；`set` 是字节类型，用于存储当前目标值的索引；`init` 是布尔信号，表示是否已完成初始化。\n\n- 主逻辑部分\n -- REGION 初始化\n    在功能块第一次运行时，初始化内部变量。将输入值 `X01` 到 `X34` 存储到二维数组 `X` 中，并将输出 `P1` 到 `P4` 初始化为 `X01` 到 `X04` 的值。同时，根据输入 `A0` 设置 `set.0`，并将 `init` 标志置为 `TRUE`，表示初始化完成。\n\n -- REGION 过渡触发\n    如果输入信号 `A0` 或 `A1` 发生变化（通过 `XOR` 操作检测），则更新 `set.0` 和 `set.1` 的值，并启动过渡过程。如果 `TC` 大于 0 秒，则计算过渡斜率 `S1` 到 `S4`，并记录当前时间戳 `tx` 到 `last`，同时将 `start` 标志置为 `TRUE`，表示过渡开始。\n\n -- REGION 过渡执行\n    如果过渡正在进行（`start` 为 `TRUE`），并且当前时间与过渡开始时间的差值小于 `TC`，则根据斜率 `S1` 到 `S4` 逐步调整输出值 `P1` 到 `P4`，使其平滑过渡到目标值。\n\n -- REGION 过渡完成\n    如果过渡时间已到（当前时间与过渡开始时间的差值大于或等于 `TC`），则将输出值 `P1` 到 `P4` 直接设置为目标值，并将 `start` 标志置为 `FALSE`，表示过渡完成。\n\n- 总结\n该功能块通过检测输入信号的变化，启动过渡过程，并根据指定的时间 `TC` 逐步调整输出值，使其平滑过渡到目标值。过渡过程中，输出值的变化速率由斜率 `S1` 到 `S4` 控制，确保过渡的平滑性和可控性。", "name": "PARSET"}