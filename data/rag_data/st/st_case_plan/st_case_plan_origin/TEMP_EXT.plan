{"variables": [], "instructions": [], "planning": "- 概述\n这段代码是一个使用SCL编写的功能块，名为“TEMP_EXT”，用于根据外部温度值控制加热和冷却系统。功能块根据输入的温度值、日期、时间和配置参数，决定是否启动加热或冷却。它还考虑了加热和冷却的季节性周期以及白天和夜晚的不同温度设定。\n\n- 变量定义\n代码中定义了以下几类变量：\n - 输入变量：外部温度值（t_ext1, t_ext2, t_ext3）、温度配置（t_ext_config）、日期和时间（dt_in）、温度范围（t_ext_min, t_ext_max）、默认温度（t_ext_default）、加热和冷却周期（heat_period_start, heat_period_stop, cool_period_start, cool_period_stop）、加热和冷却启动/停止温度（heat_start_temp_day, heat_start_temp_night, heat_stop_temp, cool_start_temp_day, cool_start_temp_night, cool_stop_temp）、白天和夜晚的开始时间（start_day, start_night）、循环时间（CYCLE_TIME）。\n - 输出变量：最终外部温度（t_ext）、加热状态（heat）、冷却状态（cool）。\n - 内部变量：时间变量（tx, last_run）、初始化标志（init）、加热和冷却周期日期（cool_start, cool_stop, heat_start, heat_stop）、当前日期（xdate）、白天标志（day）。\n\n- 主逻辑部分\n-- REGION 初始化\n   此区域用于初始化功能块。如果功能块尚未初始化，则设置加热和冷却周期的开始和结束日期。这些日期基于输入参数，但年份被固定为1972年，以确保每年的周期一致。\n-- REGION 时间检查\n   此区域检查是否达到了循环时间。如果未达到，则直接返回，不执行后续逻辑。这确保了功能块在指定的时间间隔内运行。\n-- REGION 日期和时间处理\n   此区域处理当前日期和时间。首先，将输入的日期和时间转换为功能块使用的格式，并确定当前是白天还是夜晚。\n-- REGION 温度处理\n   此区域根据输入的温度值和配置参数，计算最终的外部温度。使用“MULTI_IN”函数从多个输入温度值中选择一个有效的温度值，并确保其在指定的范围内。\n-- REGION 加热控制\n   此区域根据当前日期和时间，以及外部温度值，决定是否启动加热。如果当前日期在加热周期内，并且温度低于设定的启动温度，则启动加热。如果温度高于停止温度，则停止加热。\n-- REGION 冷却控制\n   此区域根据当前日期和时间，以及外部温度值，决定是否启动冷却。如果当前日期在冷却周期内，并且温度高于设定的启动温度，则启动冷却。如果温度低于停止温度，则停止冷却。\n-- REGION 更新时间\n   此区域更新最后一次运行的时间，以便在下一次循环时进行检查。", "name": "TEMP_EXT"}