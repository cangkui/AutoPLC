{"variables": [], "instructions": [], "planning": "- 概述\n这段代码定义了一个功能块 `M_T`，用于测量输入信号 `IN` 的持续时间，并在输入信号变为低电平时输出持续时间。它还支持复位功能，并可以设置最大测量时间 `TMAX`。\n\n- 变量定义\n代码中定义了以下几类变量：\n  - 输入变量：`IN`（输入信号）、`TMAX`（最大测量时间）、`RST`（复位信号）。\n  - 输出变量：`PT`（持续时间，在输入信号变为低电平时输出）、`ET`（当前持续时间）。\n  - 内部变量：`edge`（用于检测输入信号的上升沿）、`start`（记录输入信号变为高电平的时间点）、`tx`（当前时间）。\n\n- 主逻辑部分\n  -- REGION 时间测量逻辑\n      1. 首先，获取当前时间 `tx`，通过 `T_PLC_MS()` 函数获取 PLC 的当前时间（以毫秒为单位），并将其转换为 `TIME` 类型。\n      2. 如果复位信号 `RST` 为真，或者当前持续时间 `ET` 超过了最大测量时间 `TMAX`，则重置 `PT` 和 `ET` 为 `0`。\n      3. 如果输入信号 `IN` 为真：\n         - 如果 `edge` 为假（即检测到输入信号的上升沿），则记录当前时间 `tx` 到 `start` 变量中。\n         - 计算当前持续时间 `ET`，即当前时间 `tx` 减去开始时间 `start`。\n      4. 如果输入信号 `IN` 为假，则将当前持续时间 `ET` 赋值给 `PT`，表示输入信号的持续时间。\n      5. 最后，更新 `edge` 变量的值为当前输入信号 `IN` 的状态，以便在下一个周期中检测上升沿。\n\n- 总结\n该功能块通过检测输入信号的上升沿和下降沿，测量输入信号的持续时间，并在输入信号变为低电平时输出持续时间。复位信号和最大测量时间的支持使得该功能块更加灵活和安全。", "name": "M_T"}