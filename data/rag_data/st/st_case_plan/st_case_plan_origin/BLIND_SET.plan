{"variables": [], "instructions": [], "planning": "- 概述\n  这个功能块名为 `BLIND_SET`，用于控制窗帘的上升和下降操作。它处理手动和自动控制模式，并支持位置恢复功能。功能块通过输入信号控制窗帘的上升和下降，并输出当前状态和位置信息。\n\n- 变量定义\n  代码中定义了以下几类变量：\n  - 输入变量：`UP`（上升信号）、`DN`（下降信号）、`S_IN`（状态输入）、`PI`（位置输入）、`AI`（角度输入）、`IN`（使能信号）、`PX`（位置覆盖）、`AX`（角度覆盖）、`OVERRIDE_MANUAL`（手动覆盖）、`RESTORE_POSITION`（恢复位置）、`RESTORE_TIME`（恢复时间）。\n  - 输出变量：`QU`（上升输出）、`QD`（下降输出）、`STATUS`（状态输出）、`PO`（位置输出）、`AO`（角度输出）。\n  - 内部变量：`tx`（当前时间）、`ps`（保存的位置）、`as`（保存的角度）、`last`（上次操作时间）。\n\n- 主逻辑部分\n  -- REGION 初始化\n    首先，将当前时间 `tx` 转换为 `TIME` 类型，以便后续使用。\n  \n  -- REGION 手动覆盖逻辑\n    如果使能信号 `IN` 为真，并且启用了手动覆盖 `OVERRIDE_MANUAL` 或者同时接收到上升 `UP` 和下降 `DN` 信号，则将状态 `STATUS` 设置为 `178`，表示进入手动覆盖模式。\n\n  -- REGION 状态机\n    根据当前状态 `STATUS` 执行不同的逻辑：\n    - 状态 `0`：初始状态，将状态 `STATUS` 设置为输入状态 `S_IN`。\n    - 状态 `178`：手动覆盖模式，将位置输出 `PO` 和角度输出 `AO` 设置为覆盖值 `PX` 和 `AX`，同时将上升输出 `QU` 和下降输出 `QD` 设置为真。如果使能信号 `IN` 为假，则根据 `RESTORE_POSITION` 的值决定是否进入恢复状态 `179`，并记录当前时间 `last`。\n    - 状态 `179`：恢复模式，将位置输出 `PO` 和角度输出 `AO` 设置为保存的值 `ps` 和 `as`。如果当前位置和角度与输入值匹配，或者恢复时间 `RESTORE_TIME` 已到，则将状态 `STATUS` 恢复为输入状态 `S_IN`。\n    - 默认状态：将位置输出 `PO` 和角度输出 `AO` 设置为输入值 `PI` 和 `AI`，并保存这些值到 `ps` 和 `as`。同时，将状态 `STATUS` 设置为输入状态 `S_IN`，并根据上升 `UP` 和下降 `DN` 信号设置输出 `QU` 和 `QD`。\n\n  -- REGION 输出更新\n    在状态机的每个分支中，输出变量 `QU`、`QD`、`STATUS`、`PO` 和 `AO` 会根据当前状态和逻辑进行更新。", "name": "BLIND_SET"}