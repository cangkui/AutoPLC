{"variables": [], "instructions": [], "planning": "- 概述\n  该功能块 `CLK_PULSE` 用于生成一个脉冲信号，脉冲的周期由输入 `PT` 定义，脉冲的数量由输入 `N` 定义。功能块还提供了脉冲计数和运行状态的输出。\n\n- 变量定义\n  代码中定义了以下几类变量：\n  - 输入变量：`PT` 表示脉冲周期，`N` 表示脉冲数量，`RST` 表示复位信号。\n  - 输出变量：`Q` 表示脉冲输出，`CNT` 表示当前脉冲计数，`RUN` 表示功能块是否正在运行。\n  - 内部变量：`tx` 用于存储当前时间，`tn` 用于存储下一个脉冲的时间点，`init` 用于标识功能块是否已初始化。\n\n- 主逻辑部分\n  -- REGION 初始化及复位处理\n    功能块首先获取当前时间并存储在 `tx` 中，同时将 `Q` 初始化为 `FALSE`，表示没有脉冲输出。`RUN` 的值由 `CNT < N` 决定，表示功能块是否正在运行。如果功能块未初始化或接收到复位信号 `RST`，则进行初始化操作：将 `CNT` 重置为 0，计算下一个脉冲的时间点 `tn`，并将 `RUN` 设置为 `FALSE`。\n\n  -- REGION 脉冲生成\n    如果功能块已初始化且未复位，并且当前脉冲计数 `CNT` 小于 `N` 或 `N` 为 0（表示无限脉冲），同时当前时间 `tx` 与下一个脉冲时间点 `tn` 的差值大于等于脉冲周期 `PT`，则生成一个脉冲：将 `CNT` 增加 1，将 `Q` 设置为 `TRUE`，并更新下一个脉冲的时间点 `tn`。\n\n  -- REGION 输出更新\n    功能块的输出 `Q`、`CNT` 和 `RUN` 会根据上述逻辑实时更新。`Q` 表示当前是否有脉冲输出，`CNT` 表示已生成的脉冲数量，`RUN` 表示功能块是否仍在运行。\n\n- 总结\n  该功能块通过时间计算和状态管理实现了脉冲信号的生成和控制。它支持有限和无限脉冲模式，并提供了复位功能以重新启动脉冲生成过程。", "name": "CLK_PULSE"}