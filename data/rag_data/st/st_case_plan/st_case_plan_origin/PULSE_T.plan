{"variables": [], "instructions": [], "planning": "- 概述\n  这是一个名为 `PULSE_T` 的功能块，用于生成一个脉冲信号。该功能块根据输入信号 `IN` 的状态以及时间参数 `T1` 和 `T2` 来控制输出信号 `Q` 的行为。它支持复位功能，可以通过 `RST` 输入强制停止脉冲输出。\n\n- 变量定义\n  代码中定义了以下几类变量：\n  - 输入变量：`IN`（输入信号）、`T1`（脉冲高电平时间）、`T2`（脉冲总时间）、`RST`（复位信号）。\n  - 输出变量：`Q`（输出脉冲信号）。\n  - 内部变量：`init`（初始化标志）、`last`（记录上一次状态变化的时间）、`tx`（当前时间）、`edge`（输入信号的边沿检测标志）。\n\n- 主逻辑部分\n  -- REGION 初始化与时间获取\n      首先，通过 `OSCAT_BASIC.T_PLC_MS()` 获取当前时间，并将其转换为 `TIME` 类型存储在 `tx` 中。如果功能块尚未初始化（`init` 为 `FALSE`），则设置 `init` 为 `TRUE`，并记录当前时间到 `last` 中。\n\n  -- REGION 复位处理\n      如果 `RST` 输入为真，则强制将输出 `Q` 设置为 `FALSE`，停止脉冲输出。\n\n  -- REGION 脉冲生成\n      如果 `IN` 输入为真且检测到上升沿（`edge` 为 `FALSE`），并且当前没有脉冲输出（`Q` 为 `FALSE`），则记录当前时间到 `last` 中，并将输出 `Q` 设置为 `TRUE`，开始生成脉冲。\n\n  -- REGION 脉冲结束处理\n      如果 `IN` 输入为假且检测到下降沿（`edge` 为 `TRUE`），并且当前时间与 `last` 的时间差大于 `T1`，则将输出 `Q` 设置为 `FALSE`，结束脉冲的高电平部分。\n      如果当前时间与 `last` 的时间差大于或等于 `T2`，则无论 `IN` 的状态如何，都将输出 `Q` 设置为 `FALSE`，确保脉冲总时间不超过 `T2`。\n\n  -- REGION 边沿检测\n      在每次逻辑执行后，将 `IN` 的当前状态存储到 `edge` 中，用于下一次循环的边沿检测。\n\n- 总结\n  该功能块通过检测输入信号 `IN` 的上升沿和下降沿，结合时间参数 `T1` 和 `T2`，生成一个脉冲信号 `Q`。`T1` 控制脉冲的高电平时间，`T2` 控制脉冲的总时间。`RST` 输入可以强制停止脉冲输出。功能块使用时间差计算和边沿检测来实现精确的脉冲控制。", "name": "PULSE_T"}