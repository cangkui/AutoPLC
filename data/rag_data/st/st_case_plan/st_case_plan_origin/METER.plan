{"variables": [], "instructions": [], "planning": "- 概述\n这个功能块名为“METER”，用于根据输入信号和条件计算并更新一个累积值（MX）。它通过时间差（TC）和输入值（M1, M2）来计算累积值，并支持复位功能。\n\n- 变量定义\n代码中定义了以下几类变量：\n - 输入变量：M1, M2（实数输入值），I1, I2（布尔输入信号），D（实数，默认值为1.0），RST（布尔，复位信号）。\n - 输入输出变量：MX（实数，累积值）。\n - 内部变量：MR（实数，用于存储中间计算结果），MX1, MX2（实数，用于存储条件计算的中间值），tx, last（DWORD，用于时间计算），tc（实数，时间差），init（布尔，初始化标志）。\n\n- 主逻辑部分\n-- REGION 时间计算与初始化\n   - 首先，获取当前时间（tx = T_PLC_MS()）。\n   - 如果未初始化（init为FALSE），则进行初始化：设置last为当前时间，将MX的值赋给MR.RX，并将MR.R1初始化为0.0。\n   - 如果当前时间与上次记录的时间相同（tx = last），则直接返回，不执行后续逻辑。\n   - 否则，计算时间差（tc = DWORD_TO_REAL(tx - last) * 0.001），单位为秒。\n   - 更新last为当前时间（last = tx）。\n\n-- REGION 复位与累积值计算\n   - 如果复位信号RST为TRUE，则重置MR.R1和MR.RX为0.0。\n   - 否则，根据输入信号I1和I2的值，分别计算MX1和MX2：\n     - 如果I1为TRUE，MX1 = M1；否则，MX1 = 0.0。\n     - 如果I2为TRUE，MX2 = M2；否则，MX2 = 0.0。\n   - 使用R2_ADD函数更新MR的值，计算公式为：MR = R2_ADD(MR, (SEL(I1, 0.0, MX1) + SEL(I2, 0.0, MX2)) / D * TC)。\n     - SEL函数用于根据I1和I2的值选择MX1或MX2，如果信号为FALSE，则选择0.0。\n     - 最终结果除以D（默认值为1.0）并乘以时间差TC，得到当前周期的累积增量。\n   - 将MR.RX的值赋给MX，作为输出。\n\n-- REGION 输出\n   - 最终，MX的值被更新为MR.RX，作为功能块的输出结果。\n\n- 总结\n该功能块通过时间差和输入信号来计算累积值，支持复位功能。它利用时间差（TC）和输入值（M1, M2）来计算每个周期的增量，并将其累加到MR中，最终输出MX作为累积值。", "name": "METER"}