{"variables": [], "instructions": [], "planning": "- 概述\n  该功能块 `SHR_4UDE` 实现了一个4位双向移位寄存器。它可以根据输入信号进行左移或右移操作，并支持设置和复位功能。移位操作由时钟信号的上升沿触发。\n\n- 变量定义\n  代码中定义了以下几类变量：\n  - 输入变量：`SET`（设置）、`D0`（数据输入0）、`D3`（数据输入3）、`CLK`（时钟）、`DN`（方向控制）、`RST`（复位）。\n  - 输出变量：`Q0`、`Q1`、`Q2`、`Q3`（分别表示移位寄存器的4位输出）。\n  - 内部变量：`trig`（用于检测时钟信号的上升沿）。\n\n- 主逻辑部分\n  -- REGION 初始化与时钟检测\n     - 使用 `R_TRIG` 功能块检测时钟信号 `CLK` 的上升沿，并将结果存储在 `trig.Q` 中。\n  \n  -- REGION 设置与复位逻辑\n     - 如果 `SET` 或 `RST` 为真，则执行设置或复位操作：\n       - 如果 `RST` 为真，`Q0` 被设置为 `FALSE`，`Q1`、`Q2`、`Q3` 的值与 `Q0` 相同，即所有输出被复位为 `FALSE`。\n       - 如果 `SET` 为真，`Q0` 被设置为 `TRUE`，`Q1`、`Q2`、`Q3` 的值与 `Q0` 相同，即所有输出被设置为 `TRUE`。\n\n  -- REGION 移位逻辑\n     - 如果检测到时钟信号的上升沿（即 `trig.Q` 为真），则根据 `DN` 的值执行左移或右移操作：\n       - 如果 `DN` 为真，执行右移操作：\n         - `Q0` 取 `Q1` 的值。\n         - `Q1` 取 `Q2` 的值。\n         - `Q2` 取 `Q3` 的值。\n         - `Q3` 取输入 `D3` 的值。\n       - 如果 `DN` 为假，执行左移操作：\n         - `Q3` 取 `Q2` 的值。\n         - `Q2` 取 `Q1` 的值。\n         - `Q1` 取 `Q0` 的值。\n         - `Q0` 取输入 `D0` 的值。\n\n  -- REGION 输出更新\n     - 移位或设置/复位操作完成后，输出 `Q0`、`Q1`、`Q2`、`Q3` 的值会根据逻辑更新。", "name": "SHR_4UDE"}