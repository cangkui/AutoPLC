{"variables": [], "instructions": [], "planning": "- 概述\n  该功能块 `FT_RMP` 实现了一个斜坡函数，用于平滑地从当前输出值过渡到目标输入值。它支持上升和下降的斜率控制，并通过输出信号指示当前是否处于过渡状态（`busy`）以及过渡方向（`UD`）。\n\n- 变量定义\n  代码中定义了以下几类变量：\n  - 输入变量：`Rmp`（启用/禁用斜坡功能）、`in`（目标值）、`KR`（上升斜率系数）、`KF`（下降斜率系数）。\n  - 输出变量：`out`（当前输出值）、`busy`（是否处于过渡状态）、`UD`（过渡方向，`TRUE`表示上升，`FALSE`表示下降）。\n  - 内部变量：`tx`（时间差，表示从上一次计算到当前的时间间隔）、`last`（上一次计算的时间点）、`init`（初始化标志，用于首次运行时的初始化）。\n\n- 主逻辑部分\n  -- REGION 初始化\n     - 在功能块首次运行时，`init` 为 `FALSE`，此时会进行初始化：\n       - 将 `init` 设置为 `TRUE`，标记初始化完成。\n       - 将 `last` 设置为当前时间。\n       - 将 `tx` 设置为 `0`，表示时间差为 `0`。\n       - 将 `out` 初始化为 `in`，使输出值直接等于目标值。\n     - 初始化完成后，后续运行将跳过此逻辑。\n\n  -- REGION 斜坡功能控制\n     - 如果 `Rmp` 为 `FALSE`，则禁用斜坡功能：\n       - 直接将 `out` 设置为 `in`，跳过过渡过程。\n       - 将 `busy` 设置为 `FALSE`，表示没有过渡状态。\n     - 如果 `Rmp` 为 `TRUE`，则启用斜坡功能：\n       - 如果 `out` 大于 `in`，表示需要下降过渡：\n         - 使用下降斜率系数 `KF` 计算新的 `out` 值。\n         - 使用 `MAX` 函数确保 `out` 不小于 `in`。\n       - 如果 `out` 小于 `in`，表示需要上升过渡：\n         - 使用上升斜率系数 `KR` 计算新的 `out` 值。\n         - 使用 `MIN` 函数确保 `out` 不大于 `in`。\n\n  -- REGION 状态和方向判断\n     - 如果 `out` 小于 `in`，表示正在上升过渡：\n       - 将 `busy` 设置为 `TRUE`，表示处于过渡状态。\n       - 将 `UD` 设置为 `TRUE`，表示过渡方向为上升。\n     - 如果 `out` 大于 `in`，表示正在下降过渡：\n       - 将 `busy` 设置为 `TRUE`，表示处于过渡状态。\n       - 将 `UD` 设置为 `FALSE`，表示过渡方向为下降。\n     - 如果 `out` 等于 `in`，表示过渡完成：\n       - 将 `busy` 设置为 `FALSE`，表示没有过渡状态。\n\n  -- REGION 更新时间\n     - 将 `last` 更新为当前时间点，以便下一次计算时间差。\n\n- 总结\n  该功能块通过斜坡函数实现平滑过渡，支持上升和下降的斜率控制，并通过 `busy` 和 `UD` 输出信号指示当前状态和过渡方向。适用于需要平滑过渡的场景，如电机控制、温度调节等。", "name": "FT_RMP"}