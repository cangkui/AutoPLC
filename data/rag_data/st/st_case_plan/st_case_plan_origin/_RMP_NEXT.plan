{"variables": [], "instructions": [], "planning": "- 概述\n  该功能块 `_RMP_NEXT` 用于根据输入值 `IN` 和当前输出值 `OUT` 的变化趋势，控制输出信号 `UP` 和 `DN` 的状态，并调整输出值 `OUT` 的方向。它还包含一个锁定机制，用于在特定条件下阻止输出变化。\n\n- 变量定义\n  代码中定义了以下几类变量：\n  - 输入变量：`E`（使能信号，默认值为 `TRUE`）、`IN`（目标值）、`TR`（上升时间）、`TF`（下降时间）、`TL`（锁定时间）。\n  - 输出变量：`DIR`（方向，`TRUE` 表示上升）、`UP`（上升信号）、`DN`（下降信号）。\n  - 输入输出变量：`OUT`（当前输出值）。\n  - 内部变量：`rmx`（用于调整输出值的功能块）、`dirx`（用于检测输入值趋势的功能块）、`t_lock`（用于实现锁定机制的功能块）、`xen`（使能标志）、`xdir`（方向标志）。\n\n- 主逻辑部分\n  -- REGION 输入趋势检测\n    使用 `dirx` 功能块检测输入值 `IN` 的趋势。`dirx.TU` 表示输入值上升，`dirx.TD` 表示输入值下降。\n\n  -- REGION 锁定机制\n    使用 `t_lock` 功能块实现锁定机制。当满足特定条件时，启动锁定计时器。锁定时间由 `TL` 参数决定。\n\n  -- REGION 方向控制\n    根据输入值 `IN` 和当前输出值 `OUT` 的关系，设置方向标志 `xdir` 和使能标志 `xen`：\n    - 如果输入值上升且 `OUT` 小于 `IN`，则设置 `xdir` 为 `TRUE`，表示方向为上升。\n    - 如果输入值下降且 `OUT` 大于 `IN`，则设置 `xdir` 为 `FALSE`，表示方向为下降。\n    - 如果 `OUT` 达到或超过目标值 `IN`，则清除使能标志 `xen`。\n\n  -- REGION 输出信号控制\n    如果锁定计时器未激活且使能标志 `xen` 为 `TRUE`，则根据方向标志 `xdir` 设置输出信号：\n    - `UP` 和 `DIR` 设置为 `xdir` 的值。\n    - `DN` 设置为 `NOT xdir` 的值。\n    否则，将 `UP` 和 `DN` 设置为 `FALSE`，表示无变化。\n\n  -- REGION 输出值调整\n    使用 `rmx` 功能块调整输出值 `OUT`。`rmx` 根据方向标志 `DIR` 和使能信号 `E` 的值，选择上升时间 `TR` 或下降时间 `TF`，逐步调整 `OUT` 的值。", "name": "_RMP_NEXT"}