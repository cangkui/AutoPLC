{"variables": [], "instructions": [], "planning": "- 概述\n  这段代码实现了一个名为“DIMM_2”的功能块，用于控制一个调光设备。它支持多种操作模式，包括设置、复位、单次点击、长按、双击等。功能块还支持软调光和最大开启时间限制。\n\n- 变量定义\n  代码中定义了以下几类变量：\n  - 输入变量：设置、值、输入1、输入2、复位、去抖时间、最大开启时间、调光开始时间、调光时间、最小开启值、最大开启值、复位输出、软调光、双击1切换、双击2切换、双击1设置、双击2设置、双击1位置、双击2位置\n  - 输出变量：输出Q、输出D1、输出D2\n  - 输入输出变量：输出值\n  - 内部变量：去抖定时器1、去抖定时器2、点击模式1、点击模式2、最大开启时间定时器、调光器\n\n- 主逻辑部分\n  -- REGION 去抖处理\n    使用两个去抖定时器（t1和t2）分别对输入I1和I2进行去抖处理。去抖时间由输入参数T_DEBOUNCE决定。去抖后的信号分别用于点击模式检测（dc1和dc2）。\n  \n  -- REGION 复位处理\n    如果复位信号RST为真，则根据RST_OUT的值决定是否将输出值OUT清零。同时，将输出Q、D1和D2设置为假。\n\n  -- REGION 设置处理\n    如果设置信号SET为真，则将输出值OUT设置为输入值VAL，并将输出Q设置为真。\n\n  -- REGION 单次点击处理\n    如果检测到dc1的单次点击（SINGLE），则将输出值OUT限制在MIN_ON和MAX_ON之间，并将输出Q设置为真。如果检测到dc2的单次点击，则将输出Q设置为假。\n\n  -- REGION 长按处理\n    如果检测到dc1的长按（TP_LONG），则根据SOFT_DIMM的值决定是否将输出值OUT限制在MIN_ON和MAX_ON之间，并将输出Q设置为真。同时，设置调光器dim的方向为真（调光）。如果检测到dc2的长按，则将调光器dim的方向设置为假（去光）。\n\n  -- REGION 双击处理\n    如果检测到dc1的双击（DOUBLE），则根据DBL1_SET的值决定是将输出值OUT设置为DBL1_POS，还是切换输出D1的状态。如果检测到dc2的双击，则根据DBL2_SET的值决定是将输出值OUT设置为DBL2_POS，还是切换输出D2的状态。如果DBL1_TOG或DBL2_TOG为假，则将相应的输出D1或D2设置为假。\n\n  -- REGION 调光处理\n    使用调光器dim根据dc1和dc2的长按信号来调整输出值OUT。调光时间由输入参数T_DIMM决定。\n\n  -- REGION 输出值处理\n    如果输出值OUT为0，则将输出Q设置为假。\n\n  -- REGION 最大开启时间处理\n    如果输入参数T_ON_MAX大于0，则使用最大开启时间定时器t3来限制输出Q的开启时间。当定时器到达设定时间时，输出Q将被切换。", "name": "DIMM_2"}