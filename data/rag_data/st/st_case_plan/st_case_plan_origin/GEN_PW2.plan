{"variables": [], "instructions": [], "planning": "- 概述\n这段代码实现了一个名为 `GEN_PW2` 的功能块，用于生成一个基于时间的脉冲信号。该功能块可以根据输入参数（高电平时间 `TH1`/`TH2` 和低电平时间 `TL1`/`TL2`）以及触发信号 `TS` 来动态调整脉冲的占空比和周期。输出信号 `Q` 表示当前的脉冲状态，`TH` 和 `TL` 分别表示当前高电平和低电平的持续时间。\n\n- 变量定义\n代码中定义了以下几类变量：\n - 输入变量：`ENQ`（使能信号）、`TH1`（高电平时间1）、`TL1`（低电平时间1）、`TH2`（高电平时间2）、`TL2`（低电平时间2）、`TS`（触发信号，用于选择时间参数）。\n - 输出变量：`Q`（脉冲输出信号）、`TH`（当前高电平时间）、`TL`（当前低电平时间）。\n - 内部变量：`t_high`（当前高电平时间）、`t_low`（当前低电平时间）、`tx`（当前时间）、`start`（计时开始时间）、`init`（初始化标志）、`et`（经过的时间）。\n\n- 主逻辑部分\n-- REGION 初始化\n   在功能块首次运行时，初始化标志 `init` 为 `FALSE`，表示需要进行初始化。初始化过程中，记录当前时间 `tx` 为计时开始时间 `start`，并将输出变量 `TH` 和 `TL` 初始化为 `T#0s`。初始化完成后，将 `init` 设置为 `TRUE`，以避免重复初始化。\n\n-- REGION 时间参数选择\n   根据输入信号 `TS` 的状态，选择使用 `TH1`/`TL1` 还是 `TH2`/`TL2` 作为当前的高电平和低电平时间。如果 `TS` 为 `TRUE`，则使用 `TH2` 和 `TL2`；否则，使用 `TH1` 和 `TL1`。选定的时间参数分别赋值给 `t_high` 和 `t_low`。\n\n-- REGION 脉冲生成\n   如果使能信号 `ENQ` 为 `TRUE`，则开始生成脉冲信号。首先计算从计时开始时间 `start` 到当前时间 `tx` 的经过时间 `et`。然后根据当前输出信号 `Q` 的状态进行以下处理：\n   - 如果 `Q` 为 `FALSE`（低电平状态），则检查经过时间 `et` 是否大于等于 `t_low`。如果是，则将 `Q` 设置为 `TRUE`（高电平状态），并重置计时开始时间 `start`，同时将 `TL` 设置为 `T#0s`。否则，将 `TL` 设置为 `et`，表示当前低电平的持续时间。\n   - 如果 `Q` 为 `TRUE`（高电平状态），则检查经过时间 `et` 是否大于等于 `t_high`。如果是，则将 `Q` 设置为 `FALSE`（低电平状态），并重置计时开始时间 `start`，同时将 `TH` 设置为 `T#0s`。否则，将 `TH` 设置为 `et`，表示当前高电平的持续时间。\n   如果使能信号 `ENQ` 为 `FALSE`，则将输出信号 `Q` 设置为 `FALSE`，并重置 `TH` 和 `TL` 为 `T#0s`，同时更新计时开始时间 `start` 为当前时间 `tx`。", "name": "GEN_PW2"}