{"variables": [], "instructions": [], "planning": "- 概述\n  这段代码定义了一个名为 `ACTUATOR_UD` 的功能块，用于控制执行器的上下运动。它支持手动和自动模式，并包含了超时和状态管理逻辑。功能块根据输入信号（如 `UP`、`DN`、`ON`、`UD` 等）来决定执行器的动作，并通过输出信号（`Yup`、`Ydn`、`status`）反映当前状态。\n\n- 变量定义\n  代码中定义了以下几类变量：\n  - 输入变量：`UD`（上下控制信号）、`ON`（使能信号）、`Manual`（手动模式）、`Up`（上升信号）、`Dn`（下降信号）、`off`（关闭信号）、`YUP_in`（上升反馈信号）、`YDN_in`（下降反馈信号）、`TON`（开启时间）、`TOFF`（关闭时间）、`out_return`（输出返回信号）。\n  - 输出变量：`Yup`（上升输出）、`Ydn`（下降输出）、`status`（状态码）。\n  - 内部变量：`tx`（当前时间）、`last`（上次操作时间）、`init`（初始化标志）。\n\n- 主逻辑部分\n  -- REGION 初始化\n     在功能块首次运行时，`init` 变量为 `FALSE`，此时会记录当前时间 `tx` 到 `last`，并将 `init` 设置为 `TRUE`，完成初始化。\n  \n  -- REGION 关闭逻辑\n     如果 `off` 信号为 `TRUE`，则立即停止执行器的动作，将 `Yup` 和 `Ydn` 设置为 `FALSE`，并更新 `last` 为当前时间，同时将状态码 `status` 设置为 `101`，表示执行器已关闭。\n\n  -- REGION 超时逻辑\n     如果 `Yup` 或 `Ydn` 为 `TRUE`，且当前时间与上次操作时间的差值小于 `TON`（开启时间），则直接返回，不执行任何操作。类似地，如果 `Yup` 和 `Ydn` 都为 `FALSE`，且当前时间与上次操作时间的差值小于 `TOFF`（关闭时间），也直接返回。\n\n  -- REGION 手动模式\n     如果 `Manual` 信号为 `TRUE`，则进入手动模式。此时，`status` 设置为 `102`，表示手动模式激活。\n     - 如果 `Yup` 为 `TRUE` 且 `Up` 为 `FALSE`，或者 `Ydn` 为 `TRUE` 且 `Dn` 为 `FALSE`，则停止执行器的动作，将 `Yup` 和 `Ydn` 设置为 `FALSE`，并更新 `last`。\n     - 如果 `Up` 为 `TRUE` 且 `Dn` 和 `off` 为 `FALSE`，则启动上升动作，将 `Yup` 设置为 `TRUE`，`Ydn` 设置为 `FALSE`，并更新 `last`，同时将 `status` 设置为 `103`。\n     - 如果 `Dn` 为 `TRUE` 且 `Up` 和 `off` 为 `FALSE`，则启动下降动作，将 `Yup` 设置为 `FALSE`，`Ydn` 设置为 `TRUE`，并更新 `last`，同时将 `status` 设置为 `104`。\n     - 如果以上条件都不满足，则停止执行器的动作，并更新 `last`。\n\n  -- REGION 自动模式\n     如果 `Manual` 信号为 `FALSE`，则进入自动模式。\n     - 如果 `Yup` 为 `TRUE` 且 `UD` 为 `FALSE`，或者 `Ydn` 为 `TRUE` 且 `UD` 为 `TRUE`，则停止执行器的动作，将 `Yup` 和 `Ydn` 设置为 `FALSE`，并更新 `last`。\n     - 如果 `UD` 为 `TRUE` 且 `ON` 和 `off` 为 `FALSE`，则启动上升动作，将 `Yup` 设置为 `TRUE`，`Ydn` 设置为 `FALSE`，并更新 `last`，同时将 `status` 设置为 `111`。\n     - 如果 `UD` 为 `FALSE` 且 `ON` 和 `off` 为 `FALSE`，则启动下降动作，将 `Yup` 设置为 `FALSE`，`Ydn` 设置为 `TRUE`，并更新 `last`，同时将 `status` 设置为 `112`。\n     - 如果以上条件都不满足，则停止执行器的动作，并更新 `last`，同时将 `status` 设置为 `110`。\n\n  -- REGION 反馈逻辑\n     如果 `Ydn` 为 `TRUE` 且 `YUP_in` 和 `out_return` 为 `TRUE`，则停止下降动作，将 `Ydn` 设置为 `FALSE`，并将 `status` 设置为 `1`。类似地，如果 `Yup` 为 `TRUE` 且 `YDN_in` 和 `out_return` 为 `TRUE`，则停止上升动作，将 `Yup` 设置为 `FALSE`，并将 `status` 设置为 `2`。", "name": "ACTUATOR_UD"}