{"variables": [], "instructions": [], "planning": "- 概述\n这段代码定义了一个名为`BLIND_ACTUATOR`的功能块，用于控制百叶窗的执行器。它通过输入信号`UP`和`DN`来控制百叶窗的上升和下降，并通过定时器和互锁逻辑确保操作的稳定性和安全性。输出包括百叶窗的位置、角度、状态以及当前的操作状态（上升或下降）。\n\n- 变量定义\n代码中定义了以下几类变量：\n - 输入变量：`UP`（上升信号）、`DN`（下降信号）、`S_IN`（状态输入）、`T_UD`（上升/下降时间）、`T_ANGLE`（角度调整时间）、`T_LOCKOUT`（互锁时间）。\n - 输出变量：`POS`（百叶窗位置）、`ANG`（百叶窗角度）、`QU`（上升状态）、`QD`（下降状态）、`STATUS`（当前状态）。\n - 内部变量：`position`（用于计算百叶窗位置）、`angle`（用于计算百叶窗角度）、`lock`（用于实现互锁逻辑）。\n\n- 主逻辑部分\n-- REGION 互锁逻辑\n   互锁逻辑通过`lock`变量实现，确保`UP`和`DN`信号不会同时生效。`lock`使用`OSCAT_BASIC.INTERLOCK`功能块，输入为`UP`和`DN`信号，互锁时间为`T_LOCKOUT`。输出`lock.Q1`和`lock.Q2`分别表示`UP`和`DN`信号的有效状态。\n-- REGION 角度计算\n   角度计算通过`angle`变量实现。`angle`使用`OSCAT_BASIC.RMP_B`功能块，输入为`lock.Q1`或`lock.Q2`信号，表示上升或下降操作是否正在进行。定时器时间为`T_ANGLE`，用于控制角度的调整速度。输出`angle.Out`表示当前的角度值。\n-- REGION 位置计算\n   位置计算通过`position`变量实现。`position`也使用`OSCAT_BASIC.RMP_B`功能块，输入为`lock.Q1 AND angle.high`或`lock.Q2 AND angle.low`，表示在上升或下降操作完成且角度调整到位后，位置才会发生变化。定时器时间为`T_UD`，用于控制位置的调整速度。输出`position.Out`表示当前的位置值。\n-- REGION 输出赋值\n   将内部变量的值赋给输出变量：\n   - `POS`赋值为`position.Out`，表示百叶窗的当前位置。\n   - `ANG`赋值为`angle.Out`，表示百叶窗的当前角度。\n   - `QU`赋值为`lock.Q1`，表示是否正在进行上升操作。\n   - `QD`赋值为`lock.Q2`，表示是否正在进行下降操作。\n-- REGION 状态计算\n   根据输入信号`UP`和`DN`的值，计算当前状态：\n   - 如果`UP`和`DN`同时为真，则状态为`1`，表示错误状态（冲突）。\n   - 如果只有`UP`为真，则状态为`121`，表示正在上升。\n   - 如果只有`DN`为真，则状态为`122`，表示正在下降。\n   - 如果`UP`和`DN`都为假，则状态为`S_IN`，表示保持输入状态。", "name": "BLIND_ACTUATOR"}