Natural Language Requirements:  
{"variables": [], "instructions": [], "planning": "- Overview\n  The function block `FT_AVG` is used to calculate the average value of the input signal `IN`. It employs a buffer to store the most recent `N` input values and dynamically computes their average. The function block supports configuration of the enable signal `E`, reset signal `RST`, and buffer size `N`.\n\n- Variable Definitions\n  The code defines the following types of variables:\n  - Input variables: `IN` (input signal, type `REAL`), `E` (enable signal, type `BOOL`, default value `TRUE`), `N` (buffer size, type `INT`, default value `32`), `RST` (reset signal, type `BOOL`).\n  - Output variables: `AVG` (output average, type `REAL`).\n  - Internal variables: `buff` (buffer, assumed to be of `DELAY` structure type, used to store input values), `i` (loop counter, type `INT`), `init` (initialization flag, type `BOOL`).\n\n- Main Logic\n  -- REGION Initialization and Reset Handling\n     First, the buffer size `N` is constrained between 0 and 32 to ensure it remains within a reasonable range. If the function block is uninitialized (`init` is `FALSE`) or receives a reset signal (`RST` is `TRUE`), the initialization logic is executed. The initialization logic includes:\n     - Using a `FOR` loop to fill the buffer `buff` with the current input value `IN`.\n     - Setting the output average `AVG` to the current input value `IN`.\n     - Setting the initialization flag `init` to `TRUE`, indicating the function block is initialized.\n\n  -- REGION Average Calculation\n     If the function block is initialized and the enable signal `E` is `TRUE`, the average calculation logic is executed. The steps are as follows:\n     - Writing the current input value `IN` to the buffer `buff`.\n     - Updating the output average `AVG` using the formula:  \n       `AVG = AVG + (IN - buff.out) / INT_TO_REAL(N)`  \n       Here, `buff.out` is the oldest value in the buffer, and `INT_TO_REAL(N)` converts the buffer size to `REAL` type for floating-point operations.\n     This approach allows the function block to dynamically compute the average of the most recent `N` input values and output it to `AVG`.\n\n  -- REGION Output Result\n     The function block's output `AVG` always represents the calculated average. If the function block is uninitialized or reset, `AVG` is set to the current input value `IN`. During normal operation, `AVG` is dynamically updated to the average of the most recent `N` input values.", "name": "FT_AVG"}