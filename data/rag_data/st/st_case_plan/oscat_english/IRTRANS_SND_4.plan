Natural Language Requirements:  
{"variables": [], "instructions": [], "planning": "- Overview\nThis functional block, named 'IRTRANS_SND_4', is designed to handle the transmission of infrared signals. It selects the corresponding key code based on the input signal, converts it into a string format, and sends it out via a network buffer. The block also includes a timer to control the time interval for repeated transmissions.\n\n- Variable Definitions\nThe code defines the following types of variables:\n - Input variables: Device code, key codes (4), input signals (4), repeat time\n - Input/output variables: IP control structure, network buffer\n - Output variables: Key value\n - Internal variables: Key string, string size, string, timer, current key value, previous key value, device status\n\n- Main Logic\n-- REGION Device Status Check\n   First, the device status is checked. If the device status is greater than 127 and (there is data in the mailbox or the control mode is not equal to 5), execution continues. Otherwise, the function returns immediately.\n-- REGION Timer Handling\n   A TON timer is used to control the time interval for repeated transmissions. The timer's input is the condition where the current key value equals the previous key value, and the timer's time parameter is T_REPEAT.\n-- REGION Key Code Selection\n   If the network buffer size is 0, the corresponding key code is selected based on the input signal. If IN_0 is true, KEY_CODE_0 is selected; if IN_1 is true, KEY_CODE_1 is selected; if IN_2 is true, KEY_CODE_2 is selected; if IN_3 is true, KEY_CODE_3 is selected. If no input signal is present, the previous key value and output key value are reset, and the function returns.\n-- REGION String Construction and Transmission\n   If the current key value does not equal the previous key value or the timer reaches the set time, the transmission string is constructed. The string format is 'snd device code,key code'. The string is then converted into data for the network buffer, and the buffer size is set. Finally, the output key value and previous key value are updated, and the timer is reset.", "name": "IRTRANS_SND_4"}